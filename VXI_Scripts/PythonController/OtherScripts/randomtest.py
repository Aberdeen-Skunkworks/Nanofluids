import numpy as np
import matplotlib.pyplot as plt
from matplotlib.lines import Line2D

VMtime = ['357', '1598', '2124', '2893', '3662', '4421', '5197', '5959', '6732', '7496', '8271', '9031', '9800', '10748', '11335', '12103', '12876', '13637', '14412', '15180', '15949', '16710', '17486', '18255', '19017', '19783', '20552', '21318', '22087', '22853', '23624', '24390', '25167', '25934', '26699', '27467', '28236', '29004', '29773', '30535', '31309', '32077', '32836', '33609', '34376', '35140', '35911', '36680', '37455', '38219', '38988', '39752', '40527', '41287', '42062', '42826', '43593', '44364', '45132', '45901', '46669', '47433', '48205', '48973', '49742', '50506', '51277', '52041', '52812', '53581', '54345', '55111', '55882', '56649', '57422', '58190', '58956', '59720', '60485', '61254', '62031', '62800', '63562', '64335', '65097', '65863', '66636', '67405', '68166', '68936', '69704', '70471', '71246', '72010', '72776', '73543', '74314', '75087', '75847', '76617', '77389', '78157', '78926', '79694', '80456', '81222', '81991', '82760', '83535', '84299', '85063', '85834', '86601', '87367', '88142', '88911', '89679', '90442', '91208', '91977', '92747', '93511', '94282', '95054', '95818', '96591', '97353', '98127', '98888', '99659', '100430', '101198', '101962', '102728', '103500', '104266', '105032', '105808', '106572', '107339', '108111', '108873', '109646', '110415', '111183', '111952', '112710', '113487', '114254', '115022', '115785', '116558', '117322', '118088', '118859', '119625', '120397', '121165', '121933', '122697', '123468', '124240', '125008', '125768', '126536', '127305', '128073', '128845', '129609', '130377', '131146', '131912', '132685', '133452', '134220', '134985', '135751', '136522', '137289', '138064', '138826', '139592', '140363', '141129', '141896', '142664', '143440', '144208', '144976', '145741', '146503', '147274', '148047', '148813', '149577', '150345', '151110', '151881', '152647', '153421', '154190', '154952', '155722', '156489', '157264', '158021', '158797', '159561', '160332', '161102', '161864', '162631', '163402', '164170', '164941', '165710', '166478', '167241', '168009', '168778', '169549', '170317', '171081', '171848', '172619', '173390', '174151', '174927', '175689', '176456', '177226', '177999', '178761', '179534', '180297', '181065', '181836', '182609', '183371', '184144', '184904', '185674', '186441', '187213', '187982', '188745', '189513', '190286', '191055', '191823', '192590', '193359', '194123', '194889', '195660', '196426', '197200', '197962', '198728', '199499', '200272', '201034', '201807', '202569', '203335', '204108', '204874', '205646', '206415', '207178', '207949', '208713', '209482', '210253', '211024', '211790', '212561', '213323', '214096', '214863', '215631', '216400', '217164', '217930', '218697', '219472', '220237', '221005', '221769', '222538', '223307', '224079', '224846', '225614', '226383', '227152', '227914', '228682', '229449', '230215', '230991', '231753', '232519', '233297', '234065', '234827', '235594', '236360', '237131', '237897', '238668', '239439', '240201', '240972', '241738', '242511', '243273', '244049', '244817', '245577', '246348', '247114', '247882', '248654', '249416', '250190', '250959', '251721', '252493', '253257', '254029', '254791', '255562', '256328', '257104', '257873', '258637', '259403', '260169', '260941', '261707', '262478', '263247', '264010', '264774', '265546', '266317', '267083', '267858', '268626', '269385', '270155', '270922', '271697', '272461', '273230', '273994', '274769', '275529', '276298', '277068', '277840', '278608', '279377', '280138', '280909', '281680', '282443', '283217', '283982', '284745', '285516', '286283', '287047', '287818', '288589', '289362', '290130', '290897', '291659', '292426', '293196',
          '293962', '294733', '295498', '296273', '297042', '297801', '298572', '299339', '300111', '300879', '301637', '302407', '303155', '303941', '304709', '305480', '306228', '307014', '307780', '308550', '309303', '310087', '310855', '311620', '312373', '313159', '313924', '314694', '315447', '316214', '316997', '317765', '318519', '319302', '320072', '320820', '321604', '322356', '323124', '323911', '324676', '325443', '326213', '326965', '327752', '328517', '329286', '330038', '330821', '331591', '332343', '333127', '333893', '334645', '335428', '336202', '336966', '337736', '338501', '339253', '340037', '340806', '341558', '342343', '343108', '343860', '344627', '345413', '346182', '346952', '347701', '348484', '349250', '350006', '350790', '351543', '352310', '353096', '353861', '354632', '355397', '356149', '356935', '357704', '358470', '359238', '359992', '360775', '361545', '362293', '363077', '363849', '364617', '365380', '366150', '366902', '367670', '368451', '369221', '369973', '370739', '371530', '372295', '373044', '373816', '374598', '375369', '376134', '376903', '377673', '378421', '379204', '379972', '380725', '381492', '382277', '383045', '383795', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0']
IMtime = ['4875', '9133', '13390', '17662', '21924', '26190', '30450', '34707', '38978', '43240', '47507', '51770', '56024', '60298', '64559', '68824', '73085', '77344', '81609', '85870', '90130', '94392', '98654', '102916', '107176', '111435', '115706', '119967', '124235', '128496', '132750', '137022', '141283', '145550', '149811', '154067', '158339', '162602', '166863', '171128', '175396', '179663', '183930', '188196', '192470', '196735', '200996', '205253', '209525', '213785', '218053', '222313', '226570', '230842', '235102', '239370', '243631', '247888', '252161', '256420', '260687', '264955', '269222', '273488', '277755', '282024', '286286', '290555', '294816', '299070', '303348', '307558', '311861', '316089', '320358', '324659', '328890', '333157', '337425', '341722', '345996', '350266', '354502', '358805', '363040', '367343', '371574', '375840', '380144', '384411', '388683', '392954', '397227', '401498', '405771', '410043', '414314', '418587', '422859', '427130', '431398', '435670', '439941', '444214', '448485', '452758', '457030', '461301', '465574', '469845', '474117', '478379', '482646', '486912', '491184', '495457', '499728', '504001', '508272', '512544', '516812', '521079', '525350', '529621', '533892', '538166', '542437', '546708', '550982', '555254', '559524', '563799', '568070', '572341', '576602', '580870', '585137', '589408', '593679', '597953', '602250', '606492', '610757', '615030', '619301', '623573', '627846', '632119', '636390', '640662', '644933', '649206', '653479', '657749', '662022', '666295', '670566', '674828', '679095', '683361', '687633', '691899', '696166', '700433', '704704', '708977', '713250', '717520', '721791', '726066', '730337', '734608', '738882', '743153', '747424', '751686', '755953', '760221', '764492', '768763', '773037', '777333', '781608', '785878', '790149', '794424', '798694', '802965', '807239', '811511', '815782', '820056', '824327', '828598', '832871', '837143', '841404', '845671', '849936', '854211', '858482', '862753', '867020', '871288', '875558', '879831', '884104', '888375', '892647', '896920', '901191', '905462', '909736', '914007', '918278', '922553', '926824', '931094', '935367', '939629', '943894', '948161', '952429', '956694', '960962', '965233', '969507', '973778', '978049', '982324', '986594', '990865', '995140', '999411', '1003681', '1007954', '1012227', '1016487', '1020754', '1025020', '1029295', '1033565', '1037836', '1042103', '1046371', '1050643', '1054914', '1059187', '1063458', '1067730', '1072003', '1076274', '1080547', '1084820', '1089090', '1093361', '1097636', '1101907', '1106177', '1110452', '1114712', '1118978', '1123245', '1127512', '1131778', '1136045', '1140316', '1144590', '1148861', '1153134', '1157407', '1161677', '1165948', '1170223', '1174494', '1178765', '1183039', '1187310', '1191572', '1195839', '1200104', '1204377', '1208648', '1212921', '1217188', '1221455', '1225726', '1229997', '1234271', '1238542', '1242813', '1247087', '1251358', '1255629', '1259904', '1264174', '1268445', '1272720', '1276991', '1281262', '1285534', '1289796', '1294062', '1298329', '1302596', '1306862', '1311129', '1315400', '1319675', '1323946', '1328217', '1332489', '1336762', '1341033', '1345306', '1349578', '1353849', '1358122', '1362393', '1366654', '1370922', '1375187', '1379460', '1383732', '1388003', '1392271', '1396538', '1400809', '1405081', '1409354', '1413625', '1417896', '1422170', '1426442',
          '1430712', '1434987', '1439258', '1443529', '1447803', '1452074', '1456345', '1460619', '1464880', '1469145', '1473412', '1477679', '1481945', '1486213', '1490483', '1494758', '1499029', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0']

with open('IMtime.txt', 'w') as file:
    for values in IMtime:
        file.write("%s\n" % values)
file.close()

file1 = open('VMtime.txt', 'w')
for values in VMtime:
    file1.write("%s\n" % values)
file1.close()

voltage = []
current = []

file2 = open("voltage.txt", "r")
for line in file2:
    values = line.split(",")
    for num in values:
        voltage.append(num)
file2.close()

file3 = open("current.txt", "r")
for line in file3:
    values = line.split(",")
    for num in values:
        current.append(num)
file3.close()

print(current)
print(voltage)

PowerTime = 300000
VMtime = [i for i in VMtime if i != '0']
IMtime = [i for i in IMtime if i != '0']

for i in range(len(VMtime)):
    VMtime[i] = float(VMtime[i])

for i in range(len(IMtime)):
    IMtime[i] = float(IMtime[i])

for i in range(len(voltage)):
    voltage[i] = float(voltage[i])

for i in range(len(current)):
    current[i] = float(current[i])


fig = plt.figure()
ax1 = fig.add_subplot(1, 2, 1)
ax2 = fig.add_subplot(2, 2, 4)
ax = fig.add_subplot(2, 2, 2)

ax1.plot(VMtime, voltage)


for i in range(len(VMtime)):
    ax.plot([VMtime[i], VMtime[i]], [0, 1], 'b', lw=0.1)

for j in range(len(IMtime)):
    ax.plot([IMtime[j], IMtime[j]], [0, 2], 'y', lw=0.1)

    ax.plot([PowerTime, PowerTime], [0, 3], 'r', lw=2)
    ax.plot([0, PowerTime], [3, 3], 'r', lw=2)


ax.set_yticklabels([])
ax.set_xticklabels([])

ax.set_xlabel('Time (microseconds)')
ax.set_ylabel('')
ax1.set_xlabel('Time (microseconds)')
ax1.set_ylabel('Voltage (V)')
ax2.set_xlabel('Time (microseconds)')
ax2.set_ylabel('Current (I)')

custom_lines = [Line2D([0], [0], color='r', lw=4),
                Line2D([0], [0], color='y', lw=4),
                Line2D([0], [0], color='b', lw=4)]

ax.legend(custom_lines, ['Power Time', 'Current Trigger', 'Voltage Trigger'])
plt.show()
